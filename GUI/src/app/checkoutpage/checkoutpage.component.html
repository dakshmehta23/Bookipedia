<app-header></app-header>
    <!-- ============== SECTION PAGETOP ============== -->
    <section class="bg-primary padding-y-sm">
        <div class="container">
            <h3 style="color: white">Checkout</h3>
        </div> <!-- container //  -->
        </section>
        <!-- ============== SECTION PAGETOP END// ============== -->
      
        <!-- ============== SECTION ============== -->
        <section class="padding-y bg-light">
        <div class="container">

        <div class="row">
          <main class="col-xl-8 col-lg-8">
        
            <!-- ============== COMPONENT CHECKOUT =============== -->      
            <article class="card">
              <div class="content-body">
                <h5 class="card-title"> Checkout </h5>
                <form [formGroup]="requiredForm" novalidate (ngSubmit)="SubmitHandler()">
                  
                  <div class="row">
                    <div class="col-12 mb-3">
                    <label class="form-label">Full name</label>
                    <input type="text" class="form-control" placeholder="Type here" formControlName="name">
                      <div *ngIf="name?.invalid && name?.touched" class="alert alert-danger">
                        <div *ngIf="name?.errors">
                            Valid Name is required. <br> Format: Name must include only Letters
                        </div>
                      </div>
                    </div> <!-- col end.// -->
        
                    <div class="col-6 mb-3">
                      <label class="form-label">Phone Number </label>
                      <input type="tel" formControlName="phone" minlength="10" maxlength="10" class="form-control" placeholder="">
                      <div *ngIf="phone?.invalid && phone?.touched" class="alert alert-danger">
                        <div *ngIf="phone?.errors">
                            Valid Phone Number is required. <br> Format: Name must include 10 numbers
                        </div>
                      </div>
                    </div> <!-- col end.// -->
        
                    <div class="col-6 mb-3">
                      <label class="form-label">Email</label>
                      <input type="text" formControlName="email" class="form-control" placeholder="example@gmail.com" required>
                        <div *ngIf="email?.invalid && email?.touched" class="alert alert-danger">
                          <div *ngIf="email?.errors">
                              Valid Email is required. <br> Format: abcd@xyz.com
                          </div>
                        </div>
                    </div> <!-- col end.// -->
                  </div> <!-- row.// -->
        
                  <hr class="my-4">
        
                  <h5 class="card-title"> Shipping info </h5> 
        
                  <div class="row" formGroupName="address">
                    <div class="col-sm-12 mb-3">
                      <label for="" class="form-label">Address</label>
                      <input type="text" class="form-control" formControlName="street" placeholder="Type here">
                      <div *ngIf="street?.invalid && street?.touched" class="alert alert-danger">
                        <div *ngIf="street?.errors">
                            Valid Street is required.
                        </div>
                      </div>
                    </div> <!-- col end.// -->
        
                    <div class="col-sm-4 mb-3">
                      <label for="" class="form-label">City</label>
                      <input type="text" class="form-control" formControlName="city"  placeholder="Type here" >
                      <div *ngIf="city?.invalid && city?.touched" class="alert alert-danger">
                        <div *ngIf="city?.errors">
                            Valid City is required.<br> Format: Name must include only Letters
                        </div>
                      </div>
                    </div> <!-- col end.// -->
        
                    <div class="col-sm-4 mb-3">
                      <label for="" class="form-label">House</label>
                      <input type="text" class="form-control" formControlName="house"  placeholder="Type here">
                      <div *ngIf="house?.invalid && house?.touched" class="alert alert-danger">
                        <div *ngIf="house?.errors">
                            Valid House is required.
                        </div>
                      </div>
                    </div> <!-- col end.// -->
        
                    <div class="col-sm-4 col-6 mb-3">
                      <label for="" class="form-label">Postal code</label>
                      <input type="text" class="form-control" formControlName="postal" placeholder="" required>
                      <div *ngIf="zip?.invalid && zip?.touched" class="alert alert-danger">
                        <div *ngIf="zip?.errors">
                            Valid Zip is required. Format: Zip is 5 numbers
                        </div>
                      </div>
                    </div> <!-- col end.// -->
                  </div> <!-- row.// -->
                  
                  <hr class="my-4">
        
                  <h5 class="card-title"> Credit Card Info </h5>

                  <div class="row" formGroupName= "creditcard">
                    <div class="col-sm-12 mb-3">
                      <label for="" class="form-label">Credit Card Number</label>
                      <input type="text" class="form-control" formControlName="number" placeholder="Type here">
                      <div *ngIf="ccnumber?.invalid && ccnumber?.touched" class="alert alert-danger">
                        <div *ngIf="ccnumber?.errors">
                            Valid Credit Card Number is required. Format: Number must include only 16 numbers
                        </div>
                      </div>
                    </div> <!-- col end.// -->
        
                    <div class="col-sm-12 mb-3">
                      <label for="" class="form-label">Credit Card Name</label>
                      <input type="text" class="form-control" formControlName="ccname"  placeholder="Type here">
                      <div *ngIf="ccname?.invalid && ccname?.touched" class="alert alert-danger">
                        <div *ngIf="ccname?.errors">
                            Valid Credit Card Name is required.<br> Format: Name must include only Letters
                        </div>
                      </div>
                    </div> <!-- col end.// -->
        
                    <div class="col-sm-4 mb-3">
                      <label for="" class="form-label">Expiration Date</label>
                      <input type="text" class="form-control" formControlName="expirydate"  placeholder="Type here">
                      <div *ngIf="ccdate?.invalid && ccdate?.touched" class="alert alert-danger">
                        <div *ngIf="ccdate?.errors">
                            Valid Expiration Date is required <br>
                            Format : MM/YY
                        </div>
                      </div>
                    </div> <!-- col end.// -->
        
                    <div class="col-sm-4 col-6 mb-3">
                      <label for="" class="form-label">Zip code</label>
                      <input type="text" class="form-control" formControlName="zip" placeholder="" required>
                      <div *ngIf="cczip?.invalid && cczip?.touched" class="alert alert-danger">
                        <div *ngIf="cczip?.errors">
                            Valid Zip is required. Format: Zip is 5 numbers
                        </div>
                      </div>
                    </div> <!-- col end.// -->

                    <div class="col-sm-4 col-6 mb-3">
                      <label for="" class="form-label">Security Code</label>
                      <input type="password" class="form-control" formControlName="cvv" inputmode="numeric" minlength="3" maxlength="3" size="3" required>
                      <div *ngIf="cccvv?.invalid && cccvv?.touched" class="alert alert-danger">
                        <div *ngIf="cccvv?.errors">
                            Valid CVV is required. 
                        </div>
                      </div>
                    </div> <!-- col end.// -->
                  </div>
                  
                  <div class="float-end">
                    <button class="btn btn-light" (click)="router.navigate(['cart'])">Cancel</button>
                    <button class="btn btn-success" [disabled]="requiredForm.invalid || cartitems?.length == null" type="submit">Submit</button>
                  </div>
                </form>
              </div> <!-- card-body end.// -->
            </article> <!-- card end.// -->
            <!-- ============== COMPONENT CHECKOUT .// =============== -->
        
          </main> <!-- col.// -->
          <aside class="col-xl-4 col-lg-4">
            <!-- ============== COMPONENT SUMMARY =============== -->
            <article class="ms-lg-4 mt-4 mt-lg-0" style="max-width: 320px">
              <div *ngIf="cartitems?.length >0"> 
                <h6 class="card-title">Summary</h6>
                
                <dl class="dlist-align">
                  <dt>Total price:</dt>
                  <dd class="text-end"> ${{total}}</dd>
                </dl>
                <dl class="dlist-align">
                  <dt>Shipping cost and Taxes:</dt>
                  <dd class="text-end"> ${{shipping}}</dd>
                </dl>
                <hr>
                <dl class="dlist-align">
                  <dt> Total: </dt>
                  <dd class="text-end"> <strong class="text-dark">$ {{total + shipping}}</strong> </dd>
                </dl>

                <hr>
                <h6 class="mb-4">Items in cart</h6>
                
                <div *ngFor="let item of cartitems">
                  <figure class="itemside align-items-center mb-4">
                    <div class="aside">
                      <b class="badge bg-secondary rounded-pill">{{item.quantity}}</b>
                      <img [src]="item.product.imagepath" class="img-sm rounded border">
                    </div>
                    <figcaption class="info">
                      <span>{{item.product.title}} </span>
                      <div class="price text-muted">Total: ${{item.quantity * item.product.price}}</div> <!-- price .// -->
                    </figcaption>
                  </figure>
                </div>
                </div>
                
            </article> 
            <!-- ============== COMPONENT SUMMARY .// =============== -->
          </aside> <!-- col.// -->
        </div> <!-- row.// -->
        
        <br><br>
        
        </div> <!-- container .//  -->
        </section>
        <!-- ============== SECTION END// ============== -->
        <app-footer></app-footer>
